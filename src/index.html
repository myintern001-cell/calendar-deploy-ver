<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบจองห้องประชุม</title>
    <link rel="stylesheet" href="./assests/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assests/css/bootstrap-icons.min.css">
    <link rel="stylesheet" href="./assests/css/all.min.css">
    <link rel="stylesheet" href="./assests/css/sweetalert2.min.css">
    <link rel="stylesheet" href="./assests/css/select2.min.css">
    <link rel="stylesheet" href="./assests/css/select2-bootstrap-5-theme.min.css">
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <!-- page wrapper -->
    <div class="page-wrapper">
        <!-- Hamburger Button (แสดงเฉพาะมือถือ) -->
        <button class="hamburger-btn" id="hamburger-btn" aria-label="เปิดเมนู">
            <span></span>
            <span></span>
            <span></span>
        </button>

        <!-- Backdrop (สำหรับปิด Sidebar เมื่อคลิกข้างนอก) -->
        <div class="sidebar-backdrop" id="sidebar-backdrop"></div>

        <!-- Sidebar -->
        <div class="sidebar">
            <div class="sidebar-brand">
                <i class="bi bi-calendar-check" style="font-size: 24px;"></i>
                <div>
                    <h5 class="mb-0">ระบบจอง</h5>
                    <small>ห้องประชุม</small>
                </div>
            </div>
            <ul class="sidebar-menu">
                <li><a href="#" class="active"><i class="bi bi-house"></i> หน้าหลัก</a></li>
                <li><a href="#" id="menu-recent-bookings"><i class="bi bi-calendar3"></i> รายการจอง</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <div class="calendar-header">
                <div>
                    <h2 class="mb-1">ปฏิทิน</h2>
                    <p class="text-muted">ดูรายการจองห้องประชุมแบบปฏิทิน</p>
                </div>
                <div class="d-flex gap-3">
                    <button class="btn btn-outline-primary" onclick="showTodayView()">
                        <i class="bi bi-calendar-day"></i> วันนี้
                    </button>
                    <button class="btn btn-primary" onclick="showAddModal()">
                        <i class="bi bi-plus-lg"></i> เพิ่มการจอง
                    </button>
                </div>
            </div>

            <div class="d-flex justify-content-between align-items-center mb-3">
                <div class="month-nav">
                    <button onclick="prevMonth()"><i class="bi bi-chevron-left"></i></button>
                    <h4 id="currentMonth" class="mb-0"></h4>
                    <button onclick="nextMonth()"><i class="bi bi-chevron-right"></i></button>
                </div>
                <div class="legend">
                    <span class="legend-item"><span class="legend-dot room-1"></span> อำนวยการ </span>
                    <span class="legend-item"><span class="legend-dot room-2"></span> สิริศักดิ์ ภูริพัฒน์</span>
                    <span class="legend-item"><span class="legend-dot room-3"></span> พระวิสุทธาธิบดี</span>
                    <span class="legend-item"><span class="legend-dot room-4"></span> สิทธิกร บุญฉิม</span>
                    <span class="legend-item"><span class="legend-dot room-5"></span> พอเพียง</span>
                </div>
            </div>

            <div class="calendar-table">
                <!-- Desktop View (Table) -->
                <table>
                    <thead>
                        <tr>
                            <th>อาทิตย์</th>
                            <th>จันทร์</th>
                            <th>อังคาร</th>
                            <th>พุธ</th>
                            <th>พฤหัสบดี</th>
                            <th>ศุกร์</th>
                            <th>เสาร์</th>
                        </tr>
                    </thead>
                    <tbody id="calendarBody">
                        <!-- จะถูกสร้างด้วย JS -->
                    </tbody>
                </table>
                
                <!-- Mobile View (List/Card) -->
                <div class="mobile-calendar-view" id="mobileCalendarView">
                    <!-- จะถูกสร้างด้วย JS -->
                </div>
            </div>

            <!-- Scroll to Today Button (แสดงเฉพาะมือถือ) -->
            <button class="scroll-to-today" id="scrollToTodayBtn" title="กลับไปวันนี้">
                <i class="bi bi-calendar-day"></i>
            </button>
            <div class="recent-bookings-section" id="recent-bookings">
                <div class="section-header">
                    <h4><i class="bi bi-clock-history"></i> ประวัติการจอง</h4>
                </div>
                
                <div class="table-responsive">
                    <table class="table table-hover" id="recentBookingsTable">
                        <thead>
                            <tr>
                                <th>วันที่</th>
                                <th>เวลา</th>
                                <th>ห้องประชุม</th>
                                <th>วัตถุประสงค์</th>
                                <th>หน่วยงาน</th>
                                <th>ผู้เข้าร่วม</th>
                                <th></th>
                            </tr>
                            <tr class="filter-row">
                                <th><input type="text" class="form-control form-control-sm filter-input" data-column="date" placeholder="ค้นหา..."></th>
                                <th><input type="text" class="form-control form-control-sm filter-input" data-column="time" placeholder="ค้นหา..."></th>
                                <th><input type="text" class="form-control form-control-sm filter-input" data-column="room" placeholder="ค้นหา..."></th>
                                <th><input type="text" class="form-control form-control-sm filter-input" data-column="purpose" placeholder="ค้นหา..."></th>
                                <th><input type="text" class="form-control form-control-sm filter-input" data-column="unit" placeholder="ค้นหา..."></th>
                                <th><input type="text" class="form-control form-control-sm filter-input" data-column="attend" placeholder="ค้นหา..."></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody id="bookingsTableBody">
                            <!-- จะถูกสร้างด้วย JS -->
                        </tbody>
                    </table>
                    
                    <div id="noResults" class="text-center py-4" style="display: none;">
                        <i class="bi bi-search" style="font-size: 48px; color: #ccc;"></i>
                        <p class="text-muted mt-2">ไม่พบรายการที่ค้นหา</p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Event Detail Modal -->
    <div class="modal fade" id="eventModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">รายละเอียดการจอง</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="eventModalBody">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="btn-print-report">
                        <i class="bi bi-printer"></i> พิมพ์รายงาน
                    </button>
                </div>
                <!-- มาแก้ตอนระบบจริง การลบเดี๋ยวแยกไปอีกหน้าของหน้าการจองของ user นั้นๆ ส่วนของadmin สามารถลบได้เสมอ -->
                <!--<div class="modal-footer">
                    <button type="button" class="btn btn-danger" id="btn-delete-event">
                        <i class="bi bi-trash"></i> ลบการจอง
                    </button>
                </div>-->
            </div>
        </div>
    </div>

<!-- Add Event Modal  -->
<div id="modal-view-event-add" class="modal fade" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered">
        <div class="modal-content">
            <form id="add-event">
                <div class="modal-header bg-primary text-white">
                    <h5 class="modal-title"><i class="bi bi-plus-circle"></i> เพิ่มกิจกรรม</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <!-- Section: ข้อมูลพื้นฐาน -->
                    <div class="card mb-3 shadow-sm">
                        <div class="card-header bg-light">
                            ข้อมูลพื้นฐาน
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">ชื่อ-นามสกุล ผู้ขอใช้ห้องประชุม *</label>
                                    <input type="text" class="form-control" name="ename" rows="3" placeholder="กรอก ชื่อ-นามสกุล พร้อมใส่คำนำหน้า">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">หน่วยงานที่ขออนุญาต *</label>
                                    <select class="form-select" name="egroupwork">
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">วันที่จัดกิจกรรม *</label>
                                    <input type="text" class="form-control datetimepicker" name="edate" placeholder="-- เลือกวันที่ --" autocomplete="off">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">จำนวนคนเข้าร่วม *</label>
                                    <input type="number" class="form-control" name="enum_person" placeholder="ระบุจำนวนผู้เข้าร่วม" min="1">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">เวลาเริ่มการประชุม *</label>
                                    <input type="text" class="form-control timepicker-bs4" name="etime_start" placeholder="00:00" autocomplete="off">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">เวลาสิ้นสุดการประชุม *</label>
                                    <input type="text" class="form-control timepicker-bs4" name="etime_end" placeholder="00:00" autocomplete="off">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">วัตถุประสงค์การประชุม *</label>
                                    <textarea class="form-control" name="epurpose" rows="3" placeholder="เช่น การประชุมเพื่อ..."></textarea>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">เบอร์ติดต่อ *</label>
                                    <input type="text" class="form-control" name="ephone" rows="3" placeholder="กรอกเบอร์สำหรับติดต่อกลับ">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section: ห้องประชุมและผู้เข้าร่วม -->
                    <div class="card mb-3 shadow-sm">
                        <div class="card-header bg-light">
                            ห้องประชุม & รูปแบบโต๊ะ
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">ห้องประชุม *</label>
                                    <select class="form-select" name="eroom">
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label"><br></label>
                                    <input type="text" class="form-control" name="eroom_other" placeholder="เมื่อเลือก อื่นๆ กรุณาระบุรายละเอียดเพิ่มเติม">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">รูปแบบโต๊ะ *</label>
                                    <select class="form-select" name="etable">
                                    </select>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label"><br></label>
                                    <input type="text" class="form-control" name="etable_other" placeholder="เมื่อเลือก อื่นๆ กรุณาระบุรายละเอียดเพิ่มเติม">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">วันที่ประกาศเสียงตามสาย </label>
                                    <input type="text" class="form-control datetimepicker"  name="eannounce" placeholder="-- เลือกวันที่ --" autocomplete="off">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Section: อุปกรณ์ -->
                    <div class="card mb-3 shadow-sm">
                        <div class="card-header bg-light">
                            อุปกรณ์สนับสนุน
                        </div>
                        <div class="card-body d-flex flex-wrap gap-3">
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="Mic" value="ไมโครโฟน">
                                <label class="form-check-label">ไมโครโฟน</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="TeleV" value="โทรทัศน์">
                                <label class="form-check-label">โทรทัศน์</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="take_photo" value="ถ่ายภาพนิ่ง">
                                <label class="form-check-label">ถ่ายภาพนิ่ง</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="video_conference" value="Video Conference">
                                <label class="form-check-label">Video Conference</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="streaming" value="สตรีมมิ่ง">
                                <label class="form-check-label">สตรีมมิ่ง</label>
                            </div>
                            <div class="form-check">
                                <input type="checkbox" class="form-check-input" name="Projector" value="โปรเจคเตอร์">
                                <label class="form-check-label">โปรเจคเตอร์</label>
                            </div>
                        </div>
                    </div>

                    <!-- Section: ระบบอินเตอร์เน็ต & คอมพิวเตอร์ -->
                    <div class="card mb-3 shadow-sm">
                        <div class="card-header bg-light">
                            ระบบอินเตอร์เน็ต & คอมพิวเตอร์
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label">จำนวนผู้ใช้งาน Internet(User)</label>
                                    <input type="number" class="form-control" name="internet_user" placeholder="0" min="0">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">จำนวนเครื่องคอมพิวเตอร์(เครื่อง)</label>
                                    <input type="number" class="form-control" name="computer_count" placeholder="0" min="0">
                                </div>
                            </div>
                        </div>
                    </div>
                    <span class="text-danger">หมายเหตุ : * หมายถึงช่องที่จำเป็นต้องกรอกข้อมูล</span>

                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-success"><i class="bi bi-save"></i> บันทึก</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal"><i class="bi bi-x-circle"></i> ปิด</button>
                </div>
            </form>
        </div>
    </div>
</div>

<footer class="main-footer">
            <div class="container-fluid">
                <div class="row align-items-center">
                    <div class="col-md-6 text-start">
                        <p class="mb-0">
                            <i class="bi bi-calendar-check me-2"></i>
                            <strong>ระบบจองห้องประชุม</strong> © 2025
                        </p>
                    </div>
                    <div class="col-md-6 text-end">
                        <p class="mb-0">
                            Developed by <strong>Me</strong>
                        </p>
                    </div>
                </div>
            </div>
        </footer>


    <script src="./assests/js/jquery.min.js"></script>
    <script src="./assests/js/bootstrap.bundle.min.js"></script>
    <script src="./assests/js/datepicker.js"></script>
    <script src="./assests/js/dayjs.min.js"></script>
    <script src="./assests/js/customParseFormat.min.js"></script>
    <script src="./assests/js/sweetalert2@11.js"></script>
    <script src="./assests/js/select2.min.js"></script>
    <script src="./assests/datepicker-popover.js"></script>
    <script src="./assests/timepicker-bs4.js"></script>
    <script src="./assests/js/pdf-lib.min.js"></script>
    <script src="./assests/js/fontkit.umd.min.js"></script>
    <script src="./assests/pdfGenerator.js"></script>
    <script src="./script.js"></script>
</body>
</html>